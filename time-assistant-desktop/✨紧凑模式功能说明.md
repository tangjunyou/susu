# âœ¨ ç´§å‡‘æ¨¡å¼åŠŸèƒ½è¯´æ˜

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

å½“çª—å£ç½®é¡¶æ—¶ï¼Œè‡ªåŠ¨è¿›å…¥**ç´§å‡‘æ¨¡å¼**ï¼Œç•Œé¢ä¼šè‡ªåŠ¨ç¼©å°ï¼Œåªæ˜¾ç¤ºè¿›è¡Œä¸­çš„ä»»åŠ¡ï¼ŒèŠ‚çœå±å¹•ç©ºé—´ã€‚

---

## ğŸ”„ è‡ªåŠ¨åˆ‡æ¢é€»è¾‘

```
ç”¨æˆ·ç‚¹å‡»"çª—å£ç½®é¡¶"
    â†“
âœ… çª—å£ç½®é¡¶å¼€å¯
    â†“
âœ… è‡ªåŠ¨è¿›å…¥ç´§å‡‘æ¨¡å¼
    â†“
ç•Œé¢ç¼©å°ï¼Œåªæ˜¾ç¤ºæœªå®Œæˆä»»åŠ¡

ç”¨æˆ·å…³é—­"çª—å£ç½®é¡¶"
    â†“
âŒ çª—å£ç½®é¡¶å…³é—­
    â†“
âŒ é€€å‡ºç´§å‡‘æ¨¡å¼
    â†“
æ¢å¤å®Œæ•´ç•Œé¢
```

---

## ğŸ“Š ç•Œé¢å¯¹æ¯”

### æ­£å¸¸æ¨¡å¼ï¼ˆçª—å£æœªç½®é¡¶ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ—¶é—´åŠ©æ‰‹                     [è®¾ç½®]      â”‚
â”‚ é«˜æ•ˆç®¡ç†ä½ çš„æ—¶é—´å’Œè®¡åˆ’                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”        â”‚
â”‚ â”‚  1  â”‚ â”‚  1  â”‚ â”‚  0  â”‚ â”‚ 0h  â”‚        â”‚
â”‚ â”‚æ€»è®¡åˆ’â”‚ â”‚è¿›è¡Œä¸­â”‚ â”‚å·²å®Œæˆâ”‚ â”‚ç´¯è®¡æ—¶é—´â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ç­›é€‰: å…¨éƒ¨è®¡åˆ’ â–¼]      [+ æ·»åŠ è®¡åˆ’]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ä»»åŠ¡1 - è¿›è¡Œä¸­                       â”‚ â”‚
â”‚ â”‚ [å¼€å§‹è®¡æ—¶] [åæ€] [åˆ é™¤]            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
æœ€å¤§å®½åº¦: 896px (max-w-4xl)
```

### ç´§å‡‘æ¨¡å¼ï¼ˆçª—å£ç½®é¡¶ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ—¶é—´åŠ©æ‰‹ - ç´§å‡‘æ¨¡å¼ [è®¾ç½®]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ä»»åŠ¡1 - è¿›è¡Œä¸­      â”‚ â”‚
â”‚ â”‚ [å¼€å§‹è®¡æ—¶] [åæ€]  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
æœ€å¤§å®½åº¦: 576px (max-w-xl)
```

**èŠ‚çœç©ºé—´ï¼š** çº¦ 40% å®½åº¦å‡å°‘ âœ¨

---

## ğŸ“‹ ç´§å‡‘æ¨¡å¼ç‰¹æ€§

### âœ… ä¿ç•™çš„åŠŸèƒ½

| åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| **æ˜¾ç¤ºè¿›è¡Œä¸­ä»»åŠ¡** | âœ… ä¿ç•™ | åªæ˜¾ç¤ºæœªå®Œæˆçš„è®¡åˆ’ |
| **å¼€å§‹/åœæ­¢è®¡æ—¶** | âœ… ä¿ç•™ | æ­£å¸¸è®¡æ—¶åŠŸèƒ½ |
| **æ·»åŠ åæ€** | âœ… ä¿ç•™ | å¯ä»¥æ­£å¸¸æ·»åŠ åæ€ |
| **è®¾ç½®æŒ‰é’®** | âœ… ä¿ç•™ | å¯ä»¥æ‰“å¼€è®¾ç½®é¢æ¿ |
| **å®Œæˆä»»åŠ¡** | âœ… ä¿ç•™ | å¯ä»¥å‹¾é€‰å®Œæˆ |

### âŒ éšè—çš„åŠŸèƒ½

| åŠŸèƒ½ | çŠ¶æ€ | åŸå›  |
|------|------|------|
| **ç»Ÿè®¡ä¿¡æ¯** | âŒ éšè— | èŠ‚çœå‚ç›´ç©ºé—´ |
| **ç­›é€‰å™¨** | âŒ éšè— | è‡ªåŠ¨æ˜¾ç¤ºè¿›è¡Œä¸­ |
| **æ·»åŠ è®¡åˆ’æŒ‰é’®** | âŒ éšè— | å¯é€šè¿‡è®¾ç½®æ·»åŠ  |
| **å·²å®Œæˆä»»åŠ¡** | âŒ éšè— | ä¸“æ³¨å½“å‰ä»»åŠ¡ |
| **å‰¯æ ‡é¢˜** | âŒ éšè— | å‡å°‘é«˜åº¦ |

### ğŸ¨ æ ·å¼è°ƒæ•´

| å…ƒç´  | æ­£å¸¸æ¨¡å¼ | ç´§å‡‘æ¨¡å¼ | å˜åŒ– |
|------|---------|---------|------|
| **å®¹å™¨å®½åº¦** | max-w-4xl (896px) | max-w-xl (576px) | -36% |
| **æ ‡é¢˜å¤§å°** | text-2xl | text-lg | æ›´å° |
| **å†…è¾¹è·** | p-6 | p-3 | å‡åŠ |
| **å¤–è¾¹è·** | p-4 | p-2 | å‡åŠ |
| **è®¾ç½®å›¾æ ‡** | w-5 h-5 | w-4 h-4 | æ›´å° |

---

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

### é€‚åˆç´§å‡‘æ¨¡å¼çš„åœºæ™¯

âœ… **ä¸“æ³¨å·¥ä½œ**
- ç½®é¡¶æ˜¾ç¤ºå½“å‰ä»»åŠ¡
- ä¸å ç”¨å¤ªå¤šå±å¹•
- éšæ—¶æŸ¥çœ‹è¿›åº¦

âœ… **å¤šä»»åŠ¡å¤„ç†**
- ä¸»å±å¹•å·¥ä½œ
- è¾¹ç¼˜æ˜¾ç¤ºä»»åŠ¡æé†’
- å¿«é€Ÿåˆ‡æ¢ä»»åŠ¡

âœ… **ä¼šè®®/æ¼”ç¤º**
- ç½®é¡¶ä»»åŠ¡åˆ—è¡¨
- ä¸é®æŒ¡ä¸»è¦å†…å®¹
- ä¿æŒæ—¶é—´æ„è¯†

### é€‚åˆå®Œæ•´æ¨¡å¼çš„åœºæ™¯

âœ… **è®¡åˆ’ç®¡ç†**
- æ·»åŠ æ–°è®¡åˆ’
- æŸ¥çœ‹æ‰€æœ‰ç»Ÿè®¡
- ç­›é€‰ä¸åŒçŠ¶æ€

âœ… **å›é¡¾æ€»ç»“**
- æŸ¥çœ‹å·²å®Œæˆä»»åŠ¡
- æŸ¥çœ‹ç´¯è®¡æ—¶é—´
- å¯¼å‡ºæ•°æ®

---

## ğŸ”§ æŠ€æœ¯å®ç°

### çŠ¶æ€ç®¡ç†

```typescript
const [alwaysOnTop, setAlwaysOnTop] = useState(false);
const [isCompactMode, setIsCompactMode] = useState(false);

// ç½®é¡¶æ—¶è‡ªåŠ¨è¿›å…¥ç´§å‡‘æ¨¡å¼
const handleToggleAlwaysOnTop = (value: boolean) => {
  setAlwaysOnTop(value);
  setIsCompactMode(value);  // è”åŠ¨ç´§å‡‘æ¨¡å¼
};
```

### ä»»åŠ¡ç­›é€‰

```typescript
// ç´§å‡‘æ¨¡å¼ä¸‹åªæ˜¾ç¤ºæœªå®Œæˆçš„è®¡åˆ’
const filteredPlans = plans.filter((plan) => {
  if (isCompactMode) return !plan.completed;  // ç´§å‡‘æ¨¡å¼
  if (filterCompleted === 'active') return !plan.completed;
  if (filterCompleted === 'completed') return plan.completed;
  return true;
});
```

### æ¡ä»¶æ¸²æŸ“

```typescript
{!isCompactMode && (
  // ç»Ÿè®¡ä¿¡æ¯
  <div className="grid grid-cols-4 gap-4 mb-4">
    {/* ... */}
  </div>
)}

{!isCompactMode && (
  // ç­›é€‰å™¨å’Œæ·»åŠ æŒ‰é’®
  <div className="flex items-center justify-between">
    {/* ... */}
  </div>
)}
```

---

## ğŸ¨ æ ·å¼è‡ªé€‚åº”

### å“åº”å¼ç±»å

```typescript
className={`
  ${isCompactMode ? 'max-w-xl' : 'max-w-4xl'}
  ${isCompactMode ? 'p-2' : 'p-4'}
  ${isCompactMode ? 'text-lg' : 'text-2xl'}
`}
```

### CSS å˜é‡å¯¹æ¯”

| å˜é‡ | æ­£å¸¸å€¼ | ç´§å‡‘å€¼ |
|------|--------|--------|
| container-width | max-w-4xl | max-w-xl |
| padding-outer | p-4 | p-2 |
| padding-inner | p-6 | p-3 |
| title-size | text-2xl | text-lg |
| icon-size | w-5 h-5 | w-4 h-4 |
| margin-bottom | mb-4 | mb-2 |

---

## ğŸš€ ä½¿ç”¨æ­¥éª¤

### 1. å¼€å¯ç´§å‡‘æ¨¡å¼

```
1. ç‚¹å‡»å³ä¸Šè§’è®¾ç½®å›¾æ ‡ âš™ï¸
2. æ‰¾åˆ°"çª—å£ç½®é¡¶"é€‰é¡¹
3. ç‚¹å‡»å¼€å…³ â†’ è‡ªåŠ¨è¿›å…¥ç´§å‡‘æ¨¡å¼
```

### 2. ä½¿ç”¨ç´§å‡‘æ¨¡å¼

```
âœ… çª—å£è‡ªåŠ¨ç¼©å°
âœ… åªæ˜¾ç¤ºè¿›è¡Œä¸­çš„ä»»åŠ¡
âœ… å¯ä»¥æ­£å¸¸è®¡æ—¶
âœ… å¯ä»¥æ·»åŠ åæ€
âœ… å¯ä»¥å®Œæˆä»»åŠ¡
```

### 3. é€€å‡ºç´§å‡‘æ¨¡å¼

```
1. ç‚¹å‡»å³ä¸Šè§’è®¾ç½®å›¾æ ‡ âš™ï¸
2. å…³é—­"çª—å£ç½®é¡¶"
3. è‡ªåŠ¨æ¢å¤å®Œæ•´ç•Œé¢
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### å·¥ä½œæµå»ºè®®

**ä¸Šåˆè®¡åˆ’é˜¶æ®µï¼ˆå®Œæ•´æ¨¡å¼ï¼‰**
```
1. æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡
2. æ·»åŠ ä»Šæ—¥è®¡åˆ’
3. è®¾ç½®ä¼˜å…ˆçº§
4. æŸ¥çœ‹ç»Ÿè®¡æ•°æ®
```

**æ‰§è¡Œé˜¶æ®µï¼ˆç´§å‡‘æ¨¡å¼ï¼‰**
```
1. å¼€å¯çª—å£ç½®é¡¶
2. ä¸“æ³¨å½“å‰ä»»åŠ¡
3. å®æ—¶æŸ¥çœ‹è¿›åº¦
4. å®Œæˆåæ·»åŠ åæ€
```

**æ™šä¸Šå›é¡¾é˜¶æ®µï¼ˆå®Œæ•´æ¨¡å¼ï¼‰**
```
1. å…³é—­çª—å£ç½®é¡¶
2. æŸ¥çœ‹å·²å®Œæˆä»»åŠ¡
3. æŸ¥çœ‹ç´¯è®¡æ—¶é—´
4. å¯¼å‡ºæ•°æ®å¤‡ä»½
```

---

## ğŸ› å·²ä¿®å¤çš„é—®é¢˜

### é—®é¢˜1ï¼šåæ€åŠŸèƒ½å‚æ•°é”™è¯¯ âœ…

**é”™è¯¯ä¿¡æ¯ï¼š**
```
invalid args 'planId' for command 'get_reflections_for_plan'
```

**æ ¹æœ¬åŸå› ï¼š**
- Tauri è‡ªåŠ¨å°† Rust çš„ `snake_case` è½¬ä¸º `camelCase`
- å‰ç«¯å‘é€çš„æ˜¯ `plan_id`ï¼Œä½† Tauri æœŸæœ› `planId`

**è§£å†³æ–¹æ¡ˆï¼š**
```typescript
// ä¿®å¤å‰
reflectionApi.getReflectionsForPlan(planId) {
  invoke('get_reflections_for_plan', { plan_id: planId });  // âŒ
}

// ä¿®å¤å
reflectionApi.getReflectionsForPlan(planId) {
  invoke('get_reflections_for_plan', { planId });  // âœ…
}
```

### é—®é¢˜2ï¼šçª—å£ç½®é¡¶å‚æ•°é”™è¯¯ âœ…

**åŒæ ·çš„é—®é¢˜ï¼š**
```typescript
// ä¿®å¤å‰
windowApi.toggleAlwaysOnTop(alwaysOnTop) {
  invoke('toggle_always_on_top', { always_on_top: alwaysOnTop });  // âŒ
}

// ä¿®å¤å
windowApi.toggleAlwaysOnTop(alwaysOnTop) {
  invoke('toggle_always_on_top', { alwaysOnTop });  // âœ…
}
```

---

## ğŸ“š Tauri å‚æ•°å‘½åè§„åˆ™

### è‡ªåŠ¨è½¬æ¢æœºåˆ¶

```
Rust å®šä¹‰ï¼šplan_id: i64
    â†“ (Tauri è‡ªåŠ¨è½¬æ¢)
å‰ç«¯æœŸæœ›ï¼š{ planId: number }
```

### å‘½åè§„èŒƒæ€»ç»“

| å±‚çº§ | Rust | TypeScript | Tauri IPC |
|------|------|------------|-----------|
| **å‡½æ•°å‚æ•°** | snake_case | camelCase | camelCase |
| **ç»“æ„ä½“å­—æ®µ** | snake_case + #[serde(rename)] | camelCase | camelCase |
| **å˜é‡å** | snake_case | camelCase | N/A |

### æœ€ä½³å®è·µ

```typescript
// âœ… æ­£ç¡®ï¼šç›´æ¥ä½¿ç”¨ camelCase
invoke('my_command', { userId: 123, isActive: true });

// âŒ é”™è¯¯ï¼šæ‰‹åŠ¨è½¬æ¢ä¸º snake_case
invoke('my_command', { user_id: 123, is_active: true });
```

---

## ğŸ‰ æ€»ç»“

### åŠŸèƒ½ç‰¹ç‚¹

- âœ… **è‡ªåŠ¨åŒ–**ï¼šç½®é¡¶æ—¶è‡ªåŠ¨è¿›å…¥ç´§å‡‘æ¨¡å¼
- âœ… **æ™ºèƒ½ç­›é€‰**ï¼šåªæ˜¾ç¤ºè¿›è¡Œä¸­çš„ä»»åŠ¡
- âœ… **ç©ºé—´ä¼˜åŒ–**ï¼šå®½åº¦å‡å°‘çº¦ 40%
- âœ… **åŠŸèƒ½ä¿ç•™**ï¼šæ ¸å¿ƒåŠŸèƒ½å…¨éƒ¨å¯ç”¨
- âœ… **ä½“éªŒä¼˜åŒ–**ï¼šä¸“æ³¨å½“å‰ä»»åŠ¡

### ä¿®å¤å†…å®¹

- âœ… åæ€åŠŸèƒ½å‚æ•°å‘½å
- âœ… çª—å£ç½®é¡¶å‚æ•°å‘½å
- âœ… ç´§å‡‘æ¨¡å¼è‡ªåŠ¨åˆ‡æ¢
- âœ… ç•Œé¢è‡ªé€‚åº”è°ƒæ•´

---

**åˆ›å»ºæ—¶é—´ï¼š** 2025-10-29  
**åŠŸèƒ½çŠ¶æ€ï¼š** âœ… å·²å®Œæˆ  
**æµ‹è¯•çŠ¶æ€ï¼š** ç­‰å¾…ç”¨æˆ·æµ‹è¯•  
**é¢„æœŸæ•ˆæœï¼š** ç½®é¡¶æ—¶ç•Œé¢è‡ªåŠ¨ç¼©å°ï¼Œåªæ˜¾ç¤ºå½“å‰ä»»åŠ¡





